var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,i=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&a(e,o,t[o]);if(n)for(var o of n(t))l.call(t,o)&&a(e,o,t[o]);return e},s=(e,n)=>t(e,o(n)),c=("undefined"!=typeof require&&require,(e,t)=>{var o={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&n)for(var a of n(e))t.indexOf(a)<0&&l.call(e,a)&&(o[a]=e[a]);return o});import{u,r as m,a as p,b as f,t as d,R as h,c as g,d as v,e as x}from"./vendor.a181df03.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function y(e,t){var o,n,r,l,a,i,s;const c=null==(o=e.current)?void 0:o.getBoundingClientRect(),u=null!=(r=null==(n=e.current)?void 0:n.scrollLeft)?r:0,m=null!=(a=null==(l=e.current)?void 0:l.scrollTop)?a:0;return[t[0]-(null!=(i=null==c?void 0:c.left)?i:0)+u,t[1]-(null!=(s=null==c?void 0:c.top)?s:0)+m]}const P=({minPosition:e,maxPosition:t,areaSize:o,areaPosition:n,areaScale:r})=>{const l=null==e?0:d([e,n,r],((e,t,o)=>-Math.min(e*o+t,0))),a=null==t?0:d([o,t,n,r],((e,t,o,n)=>{const r=t*n+o;return Math.max(r-e,0)})),i=d([l,o,a],((e,t,o)=>e+t+o));return[d([l,i],((e,t)=>e/t)),d([o,i],((e,t)=>e/t))]},b=h.createContext({current:null}),E=h.createContext(null),z=h.createContext({xPos:d([],(()=>0)),width:d([],(()=>1)),yPos:d([],(()=>0)),height:d([],(()=>1))});const S=()=>{const e=m.exports.useContext(E);if(null==e)throw new Error("You need to initialize containerRefProvider first");return e},w=()=>m.exports.useContext(z),C=(e,t)=>null==t?`var(--${e})`:`var(--${e}, ${t})`,N=C("infinite-area-scroll-size","8px"),O=C("infinite-area-scroll-margin","0px"),R=`calc(${C("infinite-area-scroll-corner-size",N)} + ${O})`,k=C("infinite-area-scroll-thumb-margin","0px"),M=e=>`calc(${e} + ${k})`,$=e=>`calc(${e} - 2 * ${k})`,I=h.createContext("horizontal"),j=()=>{const e=m.exports.useContext(b),t=(()=>{const[{scale:e,left:t,top:o}]=S();return m.exports.useCallback((([n,r])=>[(n-t.get())/e.get(),(r-o.get())/e.get()]),[t,e,o])})();return m.exports.useCallback((o=>{const n=y(e,o);return t(n)}),[t,e])},Y=function(e){var t=e,{children:o,containerRef:n,minScale:r,maxScale:l}=t,a=c(t,["children","containerRef","minScale","maxScale"]);m.exports.useEffect((()=>{var e;const t=null==(e=n.current)?void 0:e.style;null!=t&&(t.position="relative",t.overflow="hidden",t.touchAction="none",t.overscrollBehavior="none")}),[n]);const i=function(e,{minScale:t=.1,maxScale:o}){const[n,r]=u((()=>({left:0,top:0,scale:1,config:{mass:.1,tension:280,friction:20,clamp:!0}}))),l=m.exports.useRef([0,0]),a={min:800*(t-1)};return null!=o&&(a.max=800*(o-1)),p({onPinchStart:({origin:t})=>{l.current=y(e,t)},onPinch:({event:e,offset:[t]})=>{e.preventDefault();const o=t/800+1,a=o/n.scale.get()-1;var i=(l.current[0]-n.left.get())*a,s=(l.current[1]-n.top.get())*a;r.start({left:n.left.get()-i,top:n.top.get()-s,scale:o})},onWheel:({event:e,movement:[t,o]})=>{e.preventDefault(),r.start({left:-t,top:-o})}},{domTarget:e,eventOptions:{passive:!1},wheel:{initial:()=>[-n.left.get(),-n.top.get()]},pinch:{distanceBounds:a}}),[n,r]}(n,{minScale:r,maxScale:l}),s=((e,{left:t,top:o,scale:n},{minX:r,maxX:l,minY:a,maxY:i})=>{const s=f({ref:e}),[c,u]=P({minPosition:r,maxPosition:l,areaSize:s.width||1,areaPosition:t,areaScale:n}),[p,d]=P({minPosition:a,maxPosition:i,areaSize:s.height||1,areaPosition:o,areaScale:n});return m.exports.useMemo((()=>({xPos:c,width:u,yPos:p,height:d})),[d,u,c,p])})(n,i[0],a);return h.createElement(b.Provider,{value:n},h.createElement(E.Provider,{value:i},h.createElement(z.Provider,{value:s},o)))},B=({children:e})=>{const[{scale:t,left:o,top:n}]=S();return h.createElement(g.div,{style:{position:"absolute",translateX:o,translateY:n,scale:t}},e)},D=e=>{var t=e,{orientation:o,children:n,style:r}=t,l=c(t,["orientation","children","style"]);const[{left:a,top:u},m]=S(),p="horizontal"===o?a:u,{xPos:f,yPos:d,width:g,height:v}=w(),x="horizontal"===o?g:v,y="horizontal"===o?f:d;return h.createElement("div",s(i({},l),{"data-orientation":o,style:s(i({},r),"horizontal"===o?{position:"absolute",left:O,bottom:O,height:N,right:R,userSelect:"none"}:{position:"absolute",top:O,right:O,width:N,bottom:R,userSelect:"none"}),onClick:e=>{e.stopPropagation();const t=e.target,n="horizontal"===o?e.nativeEvent.offsetX:e.nativeEvent.offsetY,r="horizontal"===o?t.getBoundingClientRect().width:t.getBoundingClientRect().height,l=n<=y.get()*r;if(!l&&n<=(y.get()+x.get())*r)return;const a=l?p.get()+.9*r:p.get()-.9*r;"horizontal"===o?m.set({left:a}):m.set({top:a})}}),h.createElement(I.Provider,{value:o},n))},X=e=>{var t=e,{style:o}=t,n=c(t,["style"]);const r=m.exports.useContext(I),l=m.exports.useRef(null),{width:a,height:u,xPos:f,yPos:d}=w(),[{left:v,top:x},y]=S(),P="horizontal"===r?a:u,b="horizontal"===r?f:d,E=m.exports.useRef({position:0,size:1,contentPosition:0}),z="horizontal"===r?v:x;return p({onDragStart:({event:e})=>{e.stopPropagation(),E.current={position:b.get(),size:P.get(),contentPosition:z.get()}},onDrag:({event:e,movement:[t,o]})=>{e.stopPropagation();const n="horizontal"===r?t:o,l=E.current.contentPosition-n/E.current.size;"horizontal"===r?y.set({left:l}):y.set({top:l})}},{domTarget:l}),h.createElement(g.div,s(i({},n),{ref:l,"data-orientation":r,onClick:e=>{e.stopPropagation()},style:s(i({},o),"horizontal"===r?{position:"absolute",left:b.to((e=>M(100*e+"%"))),width:P.to((e=>$(100*e+"%"))),bottom:k,top:k,touchAction:"none"}:{position:"absolute",top:b.to((e=>M(100*e+"%"))),height:P.to((e=>$(100*e+"%"))),left:k,right:k,touchAction:"none"})}))},L=()=>{const e=m.exports.useRef(null),[t,o]=m.exports.useState([{text:"Scroll and zoom",color:"lightgrey",point:[350,50]}]),n=q(t),r=e=>o((t=>[...t,e]));return h.createElement("div",{className:"wrapper"},h.createElement(Y,i({containerRef:e},n),h.createElement("div",{className:"dragWrapper"},h.createElement("div",null,"Drag items"),h.createElement(A,{onNewItem:r,color:"red"}),h.createElement(A,{onNewItem:r,color:"blue"}),h.createElement(A,{onNewItem:r,color:"green"})),h.createElement("div",{ref:e,className:"container"},h.createElement(B,null,t.map((({point:e,color:t,text:o},n)=>h.createElement("div",{key:n,className:"item",style:{left:e[0],top:e[1],backgroundColor:t}},o)))),h.createElement(D,{orientation:"horizontal",className:"scrollbar"},h.createElement(X,{className:"thumb"})),h.createElement(D,{orientation:"vertical",className:"scrollbar"},h.createElement(X,{className:"thumb"})))))},A=({onNewItem:e,color:t})=>{const[o,n]=m.exports.useState(null),r=j(),l=x((({xy:o,last:l})=>{l?(n(null),e({point:r(o),color:t})):n(o)}));return h.createElement(h.Fragment,null,h.createElement("div",s(i({},l()),{className:"drag",style:{backgroundColor:t}})),null!=o?h.createElement("div",{className:"tmpItem",style:{left:o[0],top:o[1],backgroundColor:t,opacity:.7}}):null)},q=e=>{const t=0===e.length?null:Math.min(...e.map((({point:e})=>e[0]))),o=0===e.length?null:Math.max(...e.map((({point:e})=>e[0])))+100;return{minX:t,minY:0===e.length?null:Math.min(...e.map((({point:e})=>e[1]))),maxX:o,maxY:0===e.length?null:Math.max(...e.map((({point:e})=>e[1])))+100}};v.render(h.createElement(h.StrictMode,null,h.createElement(L,null)),document.getElementById("root"));
